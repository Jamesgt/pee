(function(){var t,n={}.hasOwnProperty,r=function(t,r){function e(){this.constructor=t}for(var u in r)n.call(r,u)&&(t[u]=r[u]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},e=[].slice;t=require("events").EventEmitter,exports.PassEventEmitter=function(t){function u(){var t,r,e;if(u.__super__.constructor.call(this),r=u._PEE_routes[this.constructor])for(t in r)n.call(r,t)&&(e=r[t],u._PEE_doPass({func:function(t){return function(n,r){return t.on(n,function(t){return r.emit(n,t)})}}(this)},t,e))}var o;return r(u,t),u._PEE_routes={},o=null,u.getGlobal=function(){return null==o&&(o=new u),o},u.prototype.emitLater=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],t.length<2&&t.unshift(null),setTimeout(function(r){return function(){return r.emit(n,t[0])}}(this),t[1])},u.prototype.emitEvery=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],t.length<2&&t.unshift(null),setInterval(function(r){return function(){return r.emit(n,t[0])}}(this),t[1])},u.prototype.pass=function(){var t,r,o,s;if(r=arguments[0],s=2<=arguments.length?e.call(arguments,1):[],r!==Object(r)||Array.isArray(r))u._PEE_doPass({func:function(t){return function(n,r){return t.on(n,function(t){return r.emit(n,t)})}}(this)},r,s);else for(t in r)n.call(r,t)&&(o=r[t],this.pass(t,o))},u._PEE_doPass=function(t,n,r){var e,u,o,s,i,l,a,c,f,g,_,h;if(0!==r.length){for(e={names:n,targets:[]},Array.isArray(n)||(e.names=n.split(/\s|,/g)),i=0,c=r.length;c>i;i++)o=r[i],e.targets=e.targets.concat(o);for(_=e.names,l=0,f=_.length;f>l;l++)if(u=_[l],""!==u)for(h=e.targets,a=0,g=h.length;g>a;a++)s=h[a],null!=(null!=s?s.on:void 0)&&!function(){return function(n,r){return t.func(n,r,t.meta)}}(this)(u,s)}},u.pass=function(){var t,n,r,o,s,i;return t=1<=arguments.length?e.call(arguments,0):[],t.length<2?void 0:("string"==typeof t[0]?(s=[null,t[0],t.slice(1)],r=s[0],n=s[1],o=s[2]):(i=[t[0],t[1],t.slice(2)],r=i[0],n=i[1],o=i[2]),null==r?void u._PEE_doPass({func:function(){return function(t,n){return u.getGlobal().on(t,function(r){return n.emit(t,r)})}}(this)},n,o):u._PEE_doPass({func:function(){return function(t,n,r){var e,o;return null==(e=u._PEE_routes)[r]&&(e[r]={}),null==(o=u._PEE_routes[r])[t]&&(o[t]=[]),u._PEE_routes[r][t].push(n)}}(this),meta:r},n,o))},u.removeAllRoutes=function(){return u._PEE_routes={}},u}(t)}).call(this);